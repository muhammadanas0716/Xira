<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Xira{% endblock %}</title>
    
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/logo.ico') }}">
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='images/logo.ico') }}">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    
    {% block extra_head %}{% endblock %}
</head>
<body class="bg-gray-50 relative">
    <div class="flex h-screen overflow-hidden relative z-10">
        {% include 'partials/_sidebar.html' %}
        
        <button onclick="toggleSidebar()" id="sidebarReopenBtn" class="sidebar-reopen-btn hidden">
            <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>

        <main class="flex-1 flex flex-col overflow-hidden">
            {% block content %}{% endblock %}
        </main>

        <div class="resize-handle" id="resizeHandle"></div>
        
        {% include 'partials/_pdf_viewer.html' %}
    </div>

    {% include 'partials/_modal.html' %}

    <script src="{{ url_for('static', filename='js/utils/security.js') }}"></script>
    <script src="{{ url_for('static', filename='js/utils/markdown.js') }}"></script>
    <script src="{{ url_for('static', filename='js/ui/modal.js') }}"></script>
    <script src="{{ url_for('static', filename='js/ui/sidebar.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat/pdf-status.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat/management.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat/questions.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat/api.js') }}"></script>
    <script src="{{ url_for('static', filename='js/pdf/viewer.js') }}"></script>
    <script src="{{ url_for('static', filename='js/pdf/controls.js') }}"></script>
    <script src="{{ url_for('static', filename='js/ui/messages.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat/tabs.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat/stock-cards.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat/display.js') }}"></script>
    <script src="{{ url_for('static', filename='js/charts/utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/charts/price-chart.js') }}"></script>
    <script src="{{ url_for('static', filename='js/charts/ratios-chart.js') }}"></script>
    <script src="{{ url_for('static', filename='js/charts/metrics-chart.js') }}"></script>
    <script src="{{ url_for('static', filename='js/charts/range-chart.js') }}"></script>
    <script src="{{ url_for('static', filename='js/charts/health-chart.js') }}"></script>
    <script src="{{ url_for('static', filename='js/charts/liquidity-chart.js') }}"></script>
    <script src="{{ url_for('static', filename='js/charts/charts.js') }}"></script>
    <script src="{{ url_for('static', filename='js/reports/generation.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    
    {% block extra_scripts %}{% endblock %}
</body>
</html>

